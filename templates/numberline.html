<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Model testing</title>
  <script src="{{ url_for('static', filename='updateTable.js') }}"></script>
</head>
<body>
  <label for="model-select"><i><b>(Choose a model:)</b></i></label><br>
  <select id="model-select" name="model">
    <option value="gpt-4o-mini">GPT-4o-mini</option>
    <option value="gpt-4">GPT-4</option>
    <option value="gpt-5">GPT-5</option>
    <option value="claude-sonnet-4-20250514">Claude-sonnet-4</option>
    <option value="claude-opus-4-1-20250805">Claude-opus-4.1</option>
    <option value="claude-opus-4-20250514">Claude-opus-4</option>
    <option value="claude-3-5-haiku-20241022">Claude-haiku-3.5</option>
    <option value="gemini-2.5-pro">Gemini-2.5-pro</option>
    <option value="gemini-2.5-flash">Gemini-2.5-flash</option>
    <option value="gemini-2.5-flash-lite">Gemini-2.5-flash-lite</option>
    <option value="gemini-2.0-flash-lite">gemini-2.0.flash-lite</option>

    <option value="llama3.1:latest">LLaMA 3.1 (latest, 4.9GB, 128K context)</option>
    <option value="llama3.1:8b">LLaMA 3.1 8B (4.9GB, 128K context)</option>
    <option value="llama3.1:70b">LLaMA 3.1 70B (43GB, 128K context)</option>
    <option value="llama3.1:405b">LLaMA 3.1 405B (243GB, 128K context)</option>

    <option value="gemma3:latest">Gemma 3 (latest, 3.3GB, 128K context, Text & Image)</option>
    <option value="gemma3:270m">Gemma 3 270M (292MB, 32K context, Text)</option>
    <option value="gemma3:1b">Gemma 3 1B (815MB, 32K context, Text)</option>
    <option value="gemma3:4b">Gemma 3 4B (latest, 3.3GB, 128K context, Text & Image)</option>
    <option value="gemma3:12b">Gemma 3 12B (8.1GB, 128K context, Text & Image)</option>
    <option value="gemma3:27b">Gemma 3 27B (17GB, 128K context, Text & Image)</option>
  </select>
  <br><br>
  <textarea class="mainPrompt" style="width:100%; min-height:100px; resize:vertical; overflow:hidden;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';" onfocus="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
    You are a math tutor helping middle school students learn about placing decimals on a number line. The student just successfully completed a problem where they were given a decimal and were asked to place it on a number line. Now they are reflecting on the problem they just did. Your job will be to ask the students reflection questions to strengthen their understanding of the content and to give feedback to the student’s answers.

    IMPORTANT NOTE: Remember that you are dealing with middle school students, so adjust language and wording as necessary -- do not use complicated words or language or assume that they know any math beyond decimals. Also do not fixate on spelling or grammar errors. Only focus on the logic/thinking behind their answer.

    You will receive a JSON object with the following keys:
    - number: is the decimal number that the student placed on the number line. Do not feel pressured to use this number in your response, but if you do, MAKE SURE what you say about it is accurate.
    - reflection_questions: an array of reflection questions the student has been asked with more recent questions at higher indices.
    - student_answers: an array of the student's answers to each reflection question. This will be the same size as reflection_questions with each index corresponding to the same index in reflection_questions. Note that reflection_questions and student_answers act as a conversation between the student and an AI tutor.

    If the student shows clear and full understanding of the content in their answers:
    - IMPORTANT: Take the given reflection questions and student answers into account
    - Start your reply with the character "1" directly concatenated with the rest of the message.
    - Respond to the student’s last answer to the last reflection question
    - (optional) Add anything else that fits. e.g. if the student asks a question, give a short answer. If the student seems frustrated, add an empathetic yet encouraging message.
    - If the student seems unsure but gives a logically correct answer, also add a short, supportive explanation to boost confidence.
    - Do not ask a follow-up question in this case

    Otherwise:
    - Start your reply with the character "0" directly concatenated with the rest of the message.
    - Respond to the student's most recent answer to the most recent question and, taking the reflection questions and student answers into account, craft a reflection question that: 1) Makes the student think critically about the logic behind the problem they just solved. 2) Responds naturally to the student's most recent answer like a conversation. 
    </textarea>
    <script>
        window.addEventListener('DOMContentLoaded', function() {
        var textareas = document.querySelectorAll('.mainPrompt, #examplePrompt');
        textareas.forEach(function(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = (textarea.scrollHeight) + 'px';
        });
        });
    </script>
    <br>
    <i><b>(Configure Misconception): </b></i><br>
        <select id="misconceptions" name="sample">
        <option value="No-Misconception">No Misconception</option>
        <option value="Megz">longer decimal numbers are necessarily larger.</option>
        <option value="Segz">shorter decimal numbers are necessarily larger.</option>
        <option value="Negz">decimal numbers less than 1.0 are less than zero.</option>
        <option value="Pegz">the numbers on the left and the right of the decimal point are separate and independent.</option>
        <option value="Regz">decimal numbers behave the same way as whole numbers.</option>
        <option value="Backwardz">the instructions are backwards, for example they list smallest to largest when the instructions call for largest to shortest.</option>
        <option value="NegPosz">negative numbers are positive.</option>
        <option value="Custom" id="custom-option">(Define a custom misconception):</option>
        </select>
        <br>
        <input type="text" id="custom-sample" placeholder="Type your own misconception" style="display:none;">
        <br>

    
    <textarea class="mainPrompt" style="width:100%; min-height:100px; resize:vertical;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
        4) Creates socratic dialogue yet is simple and straightforward enough that a middle-school level reading student could understand and answer. 5) Is NOT repetitive in concepts the student has already shown good understanding in, based on previous questions and answers.

        Keep your response below 300 characters.
    </textarea>
    <br>
    <input type="text" id="custom-sample" placeholder="Type your own misconception" style="display:none;">
    <br><br>
  <!--would like to make these editable but parsing the json was a nightmare-->
  <i>(Examples. Making these editable was tough due to json parsing)</i>
  <br>
  <h class="examplePrompt" style="width:100%; min-height:100px; resize:vertical;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
     {
        role: "user",
        content: `Here is some JSON data: {number: 0.34, reflection_question: "Why did you place the decimal to the left of 0.5 and to the right of 0?", student_response: "because 0.34 is less than 0.5 and bigger than 0"}`,
    }
  </h>
  <br>
  <h class="examplePrompt" style="width:100%; min-height:100px; resize:vertical;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
    {
      role: "assistant",
      content: "1Great job! Looks like you got how to add decimals really well!.",
    }
  </h>
  <br>
  <h class="examplePrompt" style="width:100%; min-height:100px; resize:vertical;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
    {
        role: "user",
        content: `Here is some JSON data: {number: -0.6, reflection_question: "is 0.54 to the left or right of -0.6? How do you know?", student_response: "to the right. because 0.54 is positive and -0.6 is negative."}`,
    }
  </h>
  <br>
  <h class="examplePrompt" style="width:100%; min-height:100px; resize:vertical;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
    {
        role: "assistant",
        content: "1Nice work! Always remember to note whether each number is positive or negative before answering.",
    }
  <br>
  </h>
  <h class="examplePrompt" style="width:100%; min-height:100px; resize:vertical;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
    {
        role: "user",
        content: `Here is some JSON data: {number: -0.6, reflection_question: "is 0.54 to the left or right of -0.6? How do you know?", student_response: "to the left. because 0.54 is less than 0.6."}`,
    }
  <br>
  </h>
    <h class="examplePrompt" style="width:100%; min-height:100px; resize:vertical;" oninput="this.style.height='auto';this.style.height=(this.scrollHeight)+'px';">
    {
        role: "assistant",
        content: "0Not quite! You are correct that 0.54 is less than 0.6, but remember that we are thinking about -0.6, not 0.6. Try again with this in mind.",
    }
  <br>
  </h>
        
  <br><br>
  <i><b>(Construct problem state json object)</b></i>
  <br>
  <h id="problemStatePrompt">
  <br>

  {number: <input id="number" type="text" style="display:inline;" value=".9">,<br>
  reflection_questions: <input id="socraticQs" type="text" style="display:inline;">,<br>
  student_answers: <input id="socraticAs" type="text" style="display:inline;">}</h>

  <br><br>
  <button type="button" id="send-btn">Enter</button>

  <table id="history-table" border="1" style="margin-top: 30px; width: 100%; border-collapse: collapse;">
    <thead>
      <tr>
        <th>Model</th>
        <th>Prompt</th>
        <th>Response</th>
        <th>Time Elapsed</th>
      </tr>
    </thead>
    <tbody>
      <!-- Rows will be added dynamically -->
    </tbody>
  </table>

  
  <script src="{{ url_for('static', filename='numberline.js') }}"></script>
</body>
</html>
